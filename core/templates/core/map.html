{% extends 'base.html' %}
{% block content %}
	{# imports maplibre-gl script and stylesheet for map integration #}
	<link href="https://api.mapbox.com/mapbox-gl-js/v3.6.0/mapbox-gl.css" rel="stylesheet">
	<script src="https://api.mapbox.com/mapbox-gl-js/v3.6.0/mapbox-gl.js"></script>	
	<style>
		#map-container { height: 100%; padding: 5% 0 0;}
		#map { height: 80%; width: 80%; margin: 0 auto; max-width: 1000px; transition: all 2.5s ease-out;}
		.hidden { opacity: 0 }
	</style>
	
	<div id='map-container'>
		<div class='hidden' id='map'></div>
	</div>
	
	{{ MAPBOX_TOKEN|json_script:"token" }}	
	<script>
		mapdiv = document.getElementById('map')
		const token = JSON.parse(document.getElementById('token').textContent) 
		
		mapboxgl.accessToken = `${token}`;
		const map = new mapboxgl.Map({
			container: 'map',
			style: 'mapbox://styles/mapbox/streets-v9',
			projection: 'globe', // Display the map as a globe, since satellite-v9 defaults to Mercator
			zoom: 0.3,
			center: [30, 15],
			attributionControl: false,
			animate: true,
		});
		
		map.on('load', () => {
			mapdiv.classList.remove('hidden')
		})

	</script>
{% endblock %}
